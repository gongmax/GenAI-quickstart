<!--
Copyright 2024 Google LLC All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http: www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!-- <!DOCTYPE html>
<html>
<head>
    <title>Game Client</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <input type="text" placeholder="Enter your description" id="textInput1">
    <button id="sendBtn1">Send</button>
    <input style="display: none;" type="text" placeholder="Enter your description" id="textInput2">
    <button style="display: none;" id="sendBtn2">Send</button>
    <input style="display: none;" type="text" placeholder="Enter your description" id="textInput3">
    <button style="display: none;" id="sendBtn3">Send</button>
    <div id="llmResponse"></div>
    <div id="llmImage"></div>
    <input style="display: none;" type="text" placeholder="Enter your guess" id="guessInput1"> <button style="display: none;" id="guessSendBtn1">Send</button>
    <input style="display: none;" type="text" placeholder="Enter your guess" id="guessInput2"> <button style="display: none;" id="guessSendBtn2">Send</button>
    <input style="display: none;" type="text" placeholder="Enter your guess" id="guessInput3"> <button style="display: none;" id="guessSendBtn3">Send</button>

    <div id="guessImage"></div>
    <div id="guessResponse"></div>
    <div id="winner"></div>
    <div id="opponentId"></div>
    <div id="round"></div>

    <script>
        const socket = io();
        const promptSendBtn1 = document.getElementById('sendBtn1');
        const promptInput1 = document.getElementById('textInput1');
        const promptSendBtn2 = document.getElementById('sendBtn2');
        const promptInput2 = document.getElementById('textInput2');
        const promptSendBtn3 = document.getElementById('sendBtn3');
        const promptInput3 = document.getElementById('textInput3');
        const guessSendBtn1 = document.getElementById('guessSendBtn1');
        const guessInput1 = document.getElementById('guessInput1');
        const guessSendBtn2 = document.getElementById('guessSendBtn2');
        const guessInput2 = document.getElementById('guessInput2');
        const guessSendBtn3 = document.getElementById('guessSendBtn3');
        const guessInput3 = document.getElementById('guessInput3');

        promptSendBtn1.addEventListener('click', () => {
            sendMessage1();
            // cleanUp();
        });

        promptInput1.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') {
               sendMessage1();
            //    cleanUp();
            }
        });

        promptSendBtn2.addEventListener('click', () => {
            sendMessage2();
            // cleanUp();
        });

        promptInput2.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') {
               sendMessage2();
            //    cleanUp();
            }
        });

        promptSendBtn3.addEventListener('click', () => {
            sendMessage3();
            // cleanUp();
        });

        promptInput3.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') {
               sendMessage3();
            //    cleanUp();
            }
        });

        guessSendBtn1.addEventListener('click', () => {
            const message = guessInput1.value;
            guessInput1.value = '';
            socket.emit('guess1', { message: message, opponentId: document.getElementById('opponentId').textContent, round: document.getElementById('round').textContent});
            guessSendBtn1.style.display = 'none';
            guessInput1.style.display = 'none';
        });

        guessSendBtn2.addEventListener('click', () => {
            const message = guessInput1.value;
            guessInput1.value = '';
            socket.emit('guess2', { message: message, opponentId: document.getElementById('opponentId').textContent });
            guessSendBtn2.style.display = 'none';
            guessInput2.style.display = 'none';
        });

        guessSendBtn3.addEventListener('click', () => {
            const message = guessInput1.value;
            guessInput1.value = '';
            socket.emit('guess3', { message: message, opponentId: document.getElementById('opponentId').textContent });
            guessSendBtn3.style.display = 'none';
            guessInput3.style.display = 'none';

        });

        function cleanUp() {
            llmResponse.textContent = '';
            llmImage.innerHTML = '';
            guessResponse.textContent = '';
            winner.textContent = '';
        }

        function sendMessage1(round) {
            const message = promptInput1.value;
            promptInput1.value = '';
            socket.emit('prompt', { message: message, round: 1 });
            promptSendBtn1.disabled = true;
            promptInput1.disabled = true;
            promptSendBtn2.style.display = 'block';
            promptInput2.style.display = 'block';
        }

        function sendMessage2() {
            const message = promptInput2.value;
            promptInput2.value = '';
            socket.emit('prompt', { message: message, round: 2 });
            promptSendBtn2.disabled = true;
            promptInput2.disabled = true;
            promptSendBtn3.style.display = 'block';
            promptInput3.style.display = 'block';
        }

        function sendMessage3() {
            const message = promptInput3.value;
            promptInput3.value = '';
            socket.emit('prompt', { message: message, round: 3 });
            promptSendBtn3.disabled = true;
            promptInput3.disabled = true;
        }

        socket.on('llm_response', (data) => {
            const img = new Image();
            llmResponse.textContent = "Your partner's picture:";
            img.src = 'data:image/jpeg;base64,' + data.image;
            img.style.width = '200px';  // Example - adjust as needed
            img.style.height = 'auto';  // Optionally maintain aspect ratio
            llmImage.appendChild(img);
            
            guessSendBtn1.style.display = 'block';
            guessInput1.style.display = 'block';
            
            document.getElementById('opponentId').textContent = data.opponentId;
            document.getElementById('round').textContent = data.round;
        });

        socket.on('guess_response', (data) => {
            const img = new Image();
            img.src = 'data:image/jpeg;base64,' + data.image;
            img.style.width = '200px';  // Example - adjust as needed
            img.style.height = 'auto';  // Optionally maintain aspect ratio
            guessImage.appendChild(img);
        });

        socket.on('guess_response', (data) => {
            guessResponse.textContent = data.message;
        });

        socket.on('winner', (data) => {
            winner.textContent = data.message;
            // enableOldInput();
        });

        // function enableOldInput() {
        //     promptInput.disabled = false;
        //     promptSendBtn.disabled = false;
        // }
    </script>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Guess the Sketch</title>
    <meta name="description" content="" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta http-equiv="cleartype" content="on" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jura:wght@300..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/static/styles/styles.css" />
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  </head>

  <body>
    <main id="maincontent">
      <section class="wrapper wrapper-center">
        <!-- hero -->
        <div class="hero">
          <a class="hero__exit" href="/index.html" id="exitGame">
            Exit game
            <img src="/static/imgs/exit.svg" alt="exit icon" />
          </a>
          <img class="hero__logo" src="/static/imgs/logo.svg" alt="Guess the sketch graphic" />
          <!-- <div class="player-tag">
            Player
            <span>1</span>
          </div> -->
        </div>
        <!-- prompts -->
        <div class="prompts" id="prompts">
          <div class="prompts__header">
            <span>Step 1</span>
            <p>Use prompts to create your own AI Sketches</p>
          </div>
          <form class="prompts__caption" id="caption1">
            <div class="prompts__caption-input">
              <label for="prompt1">1st prompt</label>
              <button type="button" id="keyboard">
                <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
              </button>
              <input id="prompt1" type="text" value="cute baby pig sitting on sandy beach at sunset" required />
            </div>
            <div class="prompts__caption-submit">
              <button type="submit" aria-label="Submit" class="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="prompts__caption-note">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
          <form class="prompts__caption" id="caption2" disabled>
            <div class="prompts__caption-input">
              <label for="prompt2">2nd prompt</label>
              <button type="button" id="keyboard">
                <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
              </button>
              <input id="prompt2" type="text" value="five cinnamon and cream donuts in slow-motion descent" required disabled />
            </div>
            <div class="prompts__caption-submit">
              <button type="submit" aria-label="Submit" class="button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="prompts__caption-note hidden">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
          <form class="prompts__caption" id="caption3" disabled>
            <div class="prompts__caption-input">
              <label for="prompt3">3rd prompt</label>
              <button type="button" id="keyboard">
                <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
              </button>
              <input id="prompt3" type="text" value="cute baby pig sitting on sandy beach at sunset" required disabled />
            </div>
            <div class="prompts__caption-submit">
              <button type="submit" aria-label="Submit" class="button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="prompts__caption-note hidden">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
        </div>
        <!-- guesses -->
        <div class="guesses hidden" id="guesses">
          <div style="display: none;" id="opponentId"></div>
          <div style="display: none;" id="round"></div>
          <div class="guesses__header">
            <span>Step 2</span>
            <p>Guess the prompt your opponent used for this sketch</p>
          </div>
          <form id="guess1">
            <div class="guesses__input">
              <div class="guesses__img">
                <!-- <img src="https://placehold.co/600x400" alt="placeholder" /> -->
              </div>
              <div class="guesses__input-grp">
                <label for="guessPrompt1">1st prompt</label>
                <button type="button" id="keyboard">
                  <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
                </button>
                <input id="guessPrompt1" type="text" required />
              </div>
            </div>
            <div class="guesses__submit">
              <button type="submit" aria-label="Submit" class="button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="guesses__note">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
          <form id="guess2" class="hidden">
            <div class="guesses__input">
              <div class="guesses__img">
                <!-- <img src="https://placehold.co/600x400" alt="placeholder" /> -->
              </div>
              <div class="guesses__input-grp">
                <label for="guessPrompt2">2nd prompt</label>
                <button type="button" id="keyboard">
                  <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
                </button>
                <input id="guessPrompt2" type="text" required />
              </div>
            </div>
            <div class="guesses__submit">
              <button type="submit" aria-label="Submit" class="button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="guesses__note">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
          <form id="guess3" class="hidden">
            <div class="guesses__input">
              <div class="guesses__img">
                <!-- <img src="https://placehold.co/600x400" alt="placeholder" /> -->
              </div>
              <div class="guesses__input-grp">
                <label for="guessPrompt3">3rd prompt</label>
                <button type="button" id="keyboard">
                  <img src="/static/imgs/keyboard-icon.png" alt="keyboard" />
                </button>
                <input id="guessPrompt3" type="text" required />
              </div>
            </div>
            <div class="guesses__submit">
              <button type="submit" aria-label="Submit" class="button" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M19 7V11H6.83L10.41 7.41L9 6L3 12L9 18L10.41 16.59L6.83 13H21V7H19Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <p class="guesses__note">Note: Once you submit the prompt it can no longer be edited.</p>
          </form>
        </div>
        <!-- results -->
        <div class="results hidden" id="results">
          <div class="results__header">
            <div class="results__player winner">
              <span id="winner">You won!</span>
              <div class="player-tag">Player 1</div>
              <span id="percentage">88%</span>
            </div>
            <span>keyword match</span>
            <div class="results__player">
              <div class="player-tag">Player 2</div>
              <span id="percentage">26%</span>
            </div>
          </div>
          <div class="results__container">
            <!-- prompts section -->
            <div class="results__prompts">
              <div class="results__prompts-you">
                <span>Your Prompt</span>
                <div class="results__item1">
                  <span class="results__item-title">1st Prompt</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item2">
                  <span class="results__item-title">2nd Prompt</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item3">
                  <span class="results__item-title">2nd Prompt</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
              </div>
              <div class="results__guesses-them">
                <span>Their Guess</span>
                <div class="results__item1">
                  <span class="results__item-title">1st Guess</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item2">
                  <span class="results__item-title">2nd Guess</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item3">
                  <span class="results__item-title">2nd Guess</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
              </div>
            </div>
            <!-- guess section -->
            <div class="results__guesses">
              <div class="results__guesses-you">
                <span>Your Guess</span>
                <div class="results__item1">
                  <span class="results__item-title">1st Prompt</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item2">
                  <span class="results__item-title">2nd Prompt</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item3">
                  <span class="results__item-title">2nd Prompt</span>
                  <span class="results__item-percentage">26%</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
              </div>
              <div class="results__prompts-them">
                <span>Their Prompt</span>
                <div class="results__item1">
                  <span class="results__item-title">1st Guess</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item2">
                  <span class="results__item-title">2nd Guess</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
                <div class="results__item3">
                  <span class="results__item-title">2nd Guess</span>
                  <div class="results__item-img">
                    <p>cute baby pig sitting on sandy beach at sunset</p>
                    <img src="https://placehold.co/600x400" />
                  </div>
                </div>
              </div>
            </div>
          </div>
          <a type="button" href="#" id="playAgain" class="button">
            Play again
          </a>
        </div>
        <!-- loader -->
        <div class="loader-container hidden">
          <img class="hero__logo" src="/static/imgs/logo.svg" alt="Guess the sketch graphic" />
          <!-- Loading state -->
          <div class="loader loader--green">
            <img src="/static/imgs/drawing.gif" alt="pencil drawing" />
            <p>Sketching...</p>
          </div>
          <!-- Reveal what player you are -->
          <div class="player-tag">
            You're player 1
          </div>
        </div>
      </section>
      <p class="demo">For demo use purpose only</p>
    </main>
    <script src="/static/scripts/main.js"></script>
  </body>
</html>
